<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body{
            width: 70%;
            height: 100%;
            margin: 0 auto;
            padding: 0px;
        }
        header{
            background-color: green;
            position:fixed;
            width: 70%;
        }
        ul{
            padding: 0px;
            margin: 0px;
            display:inline;
            float:right;
        }
        li{
            margin: 0px;
            padding: 0px 0px 0px 15px;
            list-style:none;
            display:inline;
        }
        .navDiv{
            border:3px solid black;
            font-size: 30px;
            width: 99.6%;
            display: flex;
            justify-content:space-evenly;
            color: blue;
        }
        .rightSpan{
            float:right;
            font-size:20px;
        }
        .leftSpan{
            font-size:20px;
        }
        .storeDivLabel{
            font-size: 50px;
        }
        .storeDiv{
            padding: 100px;
            text-align: center;
        }
        .payDiv{
            width: 80%;
            height: 400px;
            margin: 0px 10% 0px 10%;
        }
        .payDivSpanLeft{
            float: left;
            width: 50%;
            height: 100%;
        }
        .payDivSpanLeftDiv{
            width: 70%;
            height: 80%;
            margin : 10% 15%;
            display: inline-block;
            background-color: #aaf;
        }
        .payDivSpanRight{
            float: left;
            width: 50%;
            height: 100%;
        }
        .payDivSpanRightDiv{
            font-size: 30px;
            height: 80%;
            width: 100%;
            margin: 10% 0%;
        }
        .payDivSpanRightDiv1{
            width: 100%;
            height: 25%;
        }
        .payDivSpanRightDiv2{
            width: 100%;
            height: 25%;
        }
        .payDivSpanRightDiv3{
            width: 80%;
            height: 25%;
            padding: 0% 10% 0% 10%;
            display: flex;
            justify-content:space-evenly;
        }
        .payDivSpanRightDiv3Btn1{
            padding: 0px;
            width: 12%;
            height: 60%;
            border: 1px solid;
            border-radius: 10px;
            cursor: pointer;
            font-size: 50px;
            line-height:0%;
            background-color:#fff;
        }
        .payDivSpanRightDiv3Btn1Img{
            padding: 0px;
            width: 100%;
            height: 100%;
            border-radius: 10px;
        }
        .payDivSpanRightDiv3Count{
            padding: 2% 0% 2% 27%;
            width: 30%;
            height: 60%;
        }
        .payDivSpanRightDiv3Btn2{
            padding: 0px;
            width: 12%;
            height: 60%;
            border: 1px solid;
            border-radius: 10px;
            cursor: pointer;
            font-size: 50px;
            line-height:50%;
            background-color:#fff;
        }
        .payDivSpanRightDiv3Btn2Img{
            padding: 0px;
            width: 100%;
            height: 100%;
            border-radius: 10px;
        }
        .payDivSpanRightDiv4{
            width: 100%;
            height: 25%;
        }
        .payDivSpanRightDiv4Button{
            font-size: 30px;
            width: 100%;
            height: 100%;
            border: 1px solid;
            border-radius: 10px;
            cursor: pointer;
        }
        .payDivBottom{
            width: 80%;
            height: 800px;
            margin: 0px 10% 100px 10%;
        }
        .payDivBottomDiv1{
            width: 100%;
            height: 15%;
        }
        .payDivBottomDiv1Label{
            font-size: 30px;
            padding: 5% 0px 2% 5%;
            border-bottom: 2px solid black;
        }
        .payDivBottomDiv2{
            width: 100%;
            height: 80%;
        }
        .payDivBottomDiv2Div{
            width: 70%;
            height: 100%;
            background-color: #aaf;
            margin: 5% 15%;
        }
        .payDivBottomDiv2DivTextarea{
            width: 100%;
            height: 100%;
            font-size: 30px;
            resize: none;
        }
    </style>
</head>
<body>
    <header>
        <div>
            <span class="leftSpan">SOJU</span>
            <span class = "rightSpan">
                    <ul>
                        <li>이용권이 --일 남았습니다.</li>
                        <li>알림</li>
                        <li><input style="font-size:20px;" type="button" value="회원가입/로그인"></li>
                    </ul>
                </span>
        </div>
        <div class="navDiv">
            <a style="text-decoration:none;" href="/recruitstudy" >소중한 친구들 구하기</a>
            <label>|</label>
            <a style="text-decoration:none;" href="/meta">모임 공간</a>
            <label>|</label>
            <a style="text-decoration:none;" href="/noticeroom">게시판</a>
            <label>|</label>
            <a style="text-decoration:none;" href="/checklist">체크리스트</a>
            <label>|</label>
            <a style="text-decoration:none;" href="/store">스토어</a>
            <label>|</label>
            <a style="text-decoration:none;" href="/mypage">마이페이지</a>
        </div>
    </header>
    <div class="storeDiv">
        <label class="storeDivLabel">스토어</label>
    </div>
    <div class="payDiv">
        <span class="payDivSpanLeft">
            <div class="payDivSpanLeftDiv">
                <input type="hidden" value="사진">
            </div>
        </span>
        <span class="payDivSpanRight">
            <div class="payDivSpanRightDiv">
                <div class="payDivSpanRightDiv1" id="itemName" th:text="${item.itemName}"></div>
                <input type="hidden" id="staticPrice" th:value="${item.price}">
                <div class="payDivSpanRightDiv2" id="price" th:text="${item.price} + '원'"></div>
                <div class="payDivSpanRightDiv3">
                    <button class="payDivSpanRightDiv3Btn1" id="minus" onclick="count('-')">
                        <img class="payDivSpanRightDiv3Btn1Img" src="/img/minus.png">
                    </button>
                    <label class="payDivSpanRightDiv3Count" type="text" id="num">1</label>
                    <button class="payDivSpanRightDiv3Btn2" id="plus" onclick="count('+')">
                        <img class="payDivSpanRightDiv3Btn2Img" src="/img/plus.png">
                    </button>
                </div>
                <div class="payDivSpanRightDiv4">
                    <input class="payDivSpanRightDiv4Button" type="button" value="구매하기" onclick="payPopup();">
                </div>
            </div>
        </span>
    </div>
    <div class="payDivBottom">
        <div class="payDivBottomDiv1">
            <div class="payDivBottomDiv1Label">상세정보</div>
        </div>
        <div class="payDivBottomDiv2">
            <div class="payDivBottomDiv2Div">
                <textarea class="payDivBottomDiv2DivTextarea" readonly th:text="${item.introduce}"></textarea>
                <input type="hidden" value="상세정보 내용">
            </div>
        </div>
    </div>
</body>
<script>
    function count(f){
        const staticPrice = parseInt(document.getElementById("staticPrice").value);
        let price = document.getElementById("price");
        let clickBtn = f;
        let num = document.getElementById("num");
        let numValue = Number(num.innerHTML);
        let resPriceNum = 0;
        if(clickBtn == "+"){
            numValue += 1;
            resPriceNum = staticPrice * numValue;
        }else{
            if(numValue > 1){
                numValue -= 1;
                resPriceNum = staticPrice * numValue;
            }else{
                alert("갯수는 1개 이하로 떨어질 수 없습니다.");
                resPriceNum = staticPrice * numValue;
            }
        }
        num.innerHTML = numValue;
        price.innerHTML = resPriceNum + "원";
    }

    function payPopup(){
        let itemName = document.getElementById("itemName").innerHTML;
        let itemCount = document.getElementById("num").innerHTML;
        let popUrl = "purchase?itemName=" + itemName + "&itemCount=" + itemCount;
        let popOption = "top=100, left=400, width=1000, height=800, status=no, menubar=no, toolbar=no, resizable=no";
        let pop = window.open(popUrl, "Pay", popOption);
    }
</script>
</html>